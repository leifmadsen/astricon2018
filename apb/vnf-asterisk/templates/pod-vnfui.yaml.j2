---
apiVersion: v1
kind: Pod
metadata:
  name: vnfui-{{ uniqname }}
  namespace: {{ namespace | string }}
  labels:
    app: {{ app_name }}
    service: {{ app_name }}
    service_class_id: '{{ _apb_service_class_id }}'
    plan_id: '{{ _apb_plan_id }}'
    service_instance_id: '{{ _apb_service_instance_id }}'
    app_selector: vnfui
spec:
  securityContext:
    nonroot: true
  containers:
    - name: vnfui
      image: dougbtv/vnf-asterisk-nginx
      imagePullPolicy: IfNotPresent
      ports:
        - container_port: 8080
          protocol: TCP
      volumeMounts:
        - mountPath: /vac/www/dist/config
          name: config
        - mountPath: /var/cache/nginx
          name: cache-volume
  volumes:
    - name: config
      configMap:
        name: controller-ui-config-{{ uniqname }}
        items:
          - key: config.js
            path: config.js
    - name: cache-volume
      emptyDir: {}
  # nodeSelector:
  #   voiptype: tandem
