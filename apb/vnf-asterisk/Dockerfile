FROM ansibleplaybookbundle/apb-base

COPY playbooks/* /opt/apb/actions/
COPY inventory /etc/ansible/hosts
COPY . /opt/ansible/roles/vnf-asterisk-apb
RUN chmod -R g=u /opt/{ansible,apb}

USER apb

LABEL "com.redhat.apb.spec"=\
"LS0tCnZlcnNpb246IDEuMgpuYW1lOiB2bmYtYXN0ZXJpc2stYXBiCmRlc2NyaXB0aW9uOiBkZXBs\
b3lzIHZuZi1hc3RlcmlzayBhcHBsaWNhdGlvbgpiaW5kYWJsZTogRmFsc2UKYXN5bmM6IG9wdGlv\
bmFsCm1ldGFkYXRhOgogIGRpc3BsYXlOYW1lOiB2bmYtYXN0ZXJpc2stYXBiCiAgbG9uZ0Rlc2Ny\
aXB0aW9uOgogICAgICBEZXBsb3ltZW50IG9mIHRoZSBWTkYgQXN0ZXJpc2sKICBpbWFnZVVybDog\
aHR0cDovL3NoaWZ0ZWlnaHQub3JnL3ZuZi1hc3Rlcmlzay5wbmcKcGxhbnM6CiAgLSBuYW1lOiBk\
ZWZhdWx0CiAgICBkZXNjcmlwdGlvbjogVGhpcyBkZWZhdWx0IHBsYW4gZGVwbG95cyBWTkYgQXN0\
ZXJpc2sKICAgIGZyZWU6IFRydWUKICAgIG1ldGFkYXRhOgogICAgICBkaXNwbGF5TmFtZTogRGVm\
YXVsdAogICAgICBsb25nRGVzY3JpcHRpb246IERlZmF1bHQgcGxhbiBmb3IgVk5GIEFzdGVyaXNr\
IGRlcGxveW1lbnRzCiAgICBwYXJhbWV0ZXJzOgogICAgICAtIHRpdGxlOiBPcGVuU2hpZnQgQWRt\
aW4gVXNlcgogICAgICAgIG5hbWU6IGFkbWluX3VzZXIKICAgICAgICB0eXBlOiBzdHJpbmcKICAg\
ICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAtIHRpdGxlOiBPcGVuU2hpZnQgQWRtaW4gUGFzc3dv\
cmQKICAgICAgICBuYW1lOiBhZG1pbl9wYXNzd29yZAogICAgICAgIHR5cGU6IHN0cmluZwogICAg\
ICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgZGlzcGxheV90eXBlOiBwYXNzd29yZAo="
